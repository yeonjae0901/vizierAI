# 🚀 Rule AI System 사용자 매뉴얼

## 📋 목차
1. [소개](#소개)
2. [시작하기](#시작하기)
3. [자연어 룰 생성](#자연어-룰-생성)
4. [룰 검증](#룰-검증)
5. [룰 분석 리포트](#룰-분석-리포트)
6. [자주 묻는 질문](#자주-묻는-질문)

## 소개

Rule AI System은 비즈니스 룰을 쉽게 생성, 검증, 분석할 수 있는 AI 기반 도구입니다. 
자연어 처리 기술을 활용하여 텍스트 설명을 구조화된 룰로 변환하고, 룰의 논리적 일관성을 검증하며, 
상세 분석 리포트를 생성합니다.

### 주요 기능
- 자연어 설명에서 구조화된 룰 자동 생성
- 기존 룰의 논리적 오류 및 문제점 검증
- 룰에 대한 상세 분석 리포트 생성
- 이해하기 쉬운 시각적 표현

## 시작하기

### 시스템 접속
1. 웹 브라우저를 열고 제공된 URL로 접속합니다.
2. 메인 화면에서 사용할 기능을 선택합니다:
   - 룰 생성: 자연어 설명에서 비즈니스 룰 생성
   - 룰 검증: 기존 룰의 논리적 일관성 검증
   - 리포트 생성: 룰에 대한 상세 분석 리포트 생성

### 인터페이스 구성
- 왼쪽 패널: 입력 영역 (텍스트 입력, JSON 입력)
- 오른쪽 패널: 결과 표시 영역 (생성된 룰, 검증 결과, 리포트)
- 상단 메뉴: 기능 전환 및 옵션 설정

## 자연어 룰 생성

자연어 설명을 구조화된 비즈니스 룰로 변환하는 기능입니다.

### 사용 방법
1. 메인 메뉴에서 "룰 생성" 기능을 선택합니다.
2. 왼쪽 패널에 비즈니스 룰에 대한 자연어 설명을 입력합니다.
   - 예: "무선 회선이 3개 이상인 고객에게 10% 할인 적용"
3. 필요한 경우 "추가 컨텍스트" 영역에 보충 설명을 입력합니다.
   - 예: "이 규칙은 통신사 프로모션을 위한 룰입니다."
4. "룰 생성" 버튼을 클릭합니다.
5. 오른쪽 패널에 생성된 구조화된 룰이 JSON 형식으로 표시됩니다.
6. "설명" 탭에서 생성된 룰에 대한 AI의 설명을 확인할 수 있습니다.

### 입력 가이드라인
- **명확한 설명**: 조건과 동작을 명확히 기술하세요.
- **단일 룰**: 한 번에 하나의 룰만 설명하세요.
- **필드명 일관성**: 시스템에서 인식 가능한 필드명을 사용하세요.
  - 고객 정보: CUST_ID, CUST_NM, CUST_AGE, CUST_STUS_CD 등
  - 서비스 정보: SVC_ID, SVC_STUS_CD, SVC_PERIOD 등
  - 계약 정보: CNTRT_ID, CNTRT_CNT, BILL_AMT 등

### 생성된 룰 활용
- **검증 이동**: "검증하기" 버튼을 클릭하여 생성된 룰을 검증 화면으로 전달할 수 있습니다.
- **JSON 내보내기**: "JSON 내보내기" 버튼을 클릭하여 생성된 룰을 파일로 저장할 수 있습니다.
- **복사**: "클립보드에 복사" 버튼을 클릭하여 룰 JSON을 클립보드에 복사할 수 있습니다.

## 룰 검증

기존 룰의 논리적 일관성과 구조적 문제를 검증하는 기능입니다.

### 사용 방법
1. 메인 메뉴에서 "룰 검증" 기능을 선택합니다.
2. 왼쪽 패널에 검증할 룰의 JSON을 입력합니다.
   - 직접 입력하거나 JSON 파일을 드래그 앤 드롭할 수 있습니다.
   - "파일 선택" 버튼을 클릭하여 로컬 파일에서 JSON을 불러올 수도 있습니다.
3. "룰 검증하기" 버튼을 클릭합니다.
4. 오른쪽 패널에 검증 결과가 표시됩니다:
   - 상단에 유효성 여부와 룰 요약 정보가 표시됩니다.
   - 룰 구조 정보 (조건 깊이, 조건 개수, 사용된 필드)가 표시됩니다.
   - 이슈 유형별 개수가 요약되어 표시됩니다.
   - 발견된 이슈 목록이 심각도별로 표시됩니다.
   - 각 이슈에 대한 필드명, 이슈 유형, 위치, 설명, 제안 정보가 표시됩니다.

### 입력 JSON 형식
```json
{
  "ruleId": "R123",
  "name": "3회선 이상 할인",
  "description": "무선 회선이 3개 이상인 고객에게 10% 할인 적용",
  "conditions": {
    "operator": "and",
    "conditions": [
      {
        "field": "SVC_CNT",
        "operator": ">=",
        "value": 3
      }
    ]
  },
  "priority": 1,
  "message": ["10% 할인 적용"]
}
```

### 검증 항목
- **중복 조건**: 동일한 필드에 대한 중복된 조건이 있는지 확인
- **유효하지 않은 연산자**: 필드 타입에 맞지 않는 연산자 사용 여부 확인
- **타입 불일치**: 필드의 데이터 타입과 조건 값의 타입 일치 여부 확인
- **자기 모순**: 동일 필드에 논리적으로 충돌하는 조건 존재 여부 확인
- **구조 복잡도**: 룰 구조의 복잡성 평가

### 이슈 심각도 수준
- **오류(Error)**: 룰 실행이 불가능한 심각한 문제
- **경고(Warning)**: 룰 실행은 가능하나 논리적으로 문제가 있거나 개선이 필요한 사항
- **정보(Info)**: 참고할만한 사항이나 제안

## 룰 분석 리포트

룰에 대한 상세 분석 리포트를 생성하는 기능입니다.

### 사용 방법
1. 룰 검증 화면에서 검증 결과를 확인한 후 "리포트 생성하기" 버튼을 클릭합니다.
2. 시스템이 AI를 활용하여 상세 분석 리포트를 생성합니다.
3. 생성된 리포트가 마크다운 형식으로 렌더링되어 표시됩니다.

### 리포트 내용
- **기본 정보**: 룰 ID, 이름, 설명, 우선순위 등
- **조건 구조 요약**: 최상위 연산자, 주요 필드, 조건 구조 등
- **오류 검토 항목**: 조건 겹침, 연산자 오류, 타입 오류, 자기 모순, 중첩 과도 등
- **요약 제안 사항**: 조건 겹침, 누락 조건, 조건 모순, 구조 단순화에 대한 제안
- **비고**: 룰 전반에 대한 평가 및 추천 개선 방향

### 리포트 활용 방법
- 룰 개발자와 비즈니스 담당자 간의 커뮤니케이션 도구로 활용
- 룰 개선 및 최적화를 위한 참고 자료로 활용
- 룰 문서화 및 지식 관리 자료로 활용

## 자주 묻는 질문

### 일반 질문

#### Q: 시스템은 어떤 언어를 지원하나요?
A: 현재 한국어와 영어를 지원합니다. 인터페이스와 생성된 결과 모두 한국어로 표시됩니다.

#### Q: 룰 생성 시 주의해야 할 점은 무엇인가요?
A: 가능한 명확하고 구체적인 설명을 제공하세요. 여러 조건과 결과를 혼합하지 말고, 하나의 룰에 집중하세요.

#### Q: JSON 파일 형식에 오류가 있을 때 어떻게 해야 하나요?
A: 시스템은 기본적인 JSON 형식 오류를 감지하여 표시합니다. 형식 오류가 발생하면 제시된 형식을 참고하여 수정하세요.

### 기술 질문

#### Q: 지원하는 조건 연산자는 어떤 것이 있나요?
A: 다음과 같은 연산자를 지원합니다:
- 비교 연산자: eq(==), neq(!=), gt(>), gte(>=), lt(<), lte(<=)
- 집합 연산자: in, not_in
- 문자열 연산자: contains, starts_with, ends_with

#### Q: 룰의 최대 복잡도는 어느 정도까지 지원하나요?
A: 이론적으로는 제한이 없으나, 가독성과 유지보수를 위해 조건의 중첩 단계는 3단계 이내로 유지하는 것을 권장합니다.

#### Q: API를 직접 호출할 수 있나요?
A: 예, 모든 기능은 REST API를 통해 직접 호출할 수 있습니다. API 문서는 `/api/docs` 또는 `/api/redoc` 경로에서 확인할 수 있습니다.

### 오류 관련 질문

#### Q: "OpenAI API 오류"가 발생했습니다. 어떻게 해야 하나요?
A: 이 오류는 AI 서비스 연결에 문제가 있을 때 발생합니다. 시스템 관리자에게 문의하거나 잠시 후 다시 시도해보세요.

#### Q: 검증 시 "잘못된 연산자" 오류가 계속 발생합니다.
A: 문자열 필드(예: CUST_NM, MRKT_CD)에는 비교 연산자(>, <, >=, <=)를 사용할 수 없습니다. 문자열 필드에는 eq, neq, in, not_in, contains 연산자만 사용하세요.

#### Q: 룰 생성 결과가 예상과 다릅니다.
A: 자연어 설명을 더 구체적으로 작성해보세요. 필드명, 조건, 액션을 명확히 구분하여 기술하는 것이 좋습니다. 복잡한 룰은 여러 개의 작은 룰로 나누어 생성하는 것도 방법입니다.

---

문제가 지속되거나 추가 질문이 있으시면 시스템 관리자에게 문의하세요. 